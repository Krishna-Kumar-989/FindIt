<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
 
    <title>Account Details</title>


    <style>


      
* {
    box-sizing: border-box;
}

html, body {
    height: 100%;
}







        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f4f9;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background-color: silver;
            color:black;
            text-align: center;
            padding: 20px;
        }

        .header h1 {
            margin: 0;
            font-size: 24px;
        }

        .content {
            padding: 20px;
        }

        .content h2 {
            color: #333;
            border-bottom: 2px solid black;
            padding-bottom: 5px;
            margin-bottom: 20px;
        }

        .details {
            line-height: 1.8;
        }

        .details label {
            font-weight: bold;
            color: #555;
        }

        .actions {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        .actions button {
            background-color:silver;
            color: black;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .actions button:hover {
            background-color:gray;
        }

        .signout {
            text-align: center;
            margin-top: 20px;
        }

        .signout button {
            background-color: #f44336;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .signout button:hover {
            background-color: #e53935;
        }

        .item-list {
            margin-top: 30px;
        }

        
        

      

         

#items_list{
display: flex;
flex-direction: column-reverse;
justify-content: center;

}





/*css for navbar*/

.navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background: rgba(255, 255, 255, 0.1); /* Semi-transparent white background */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Light border */
    border-radius: 15px; /* Rounded corners */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08); /* Soft shadow for 3D effect */
    backdrop-filter: blur(10px); /* Glass-like blur effect */
   
}

.btn_nav {
    padding: 10px 20px;
    border: none;
    background-color: transparent;
    color: white;
    cursor: pointer;
    border-radius: 5px;
    font-size: 16px;
    font-weight: 600;
    text-transform: uppercase;
    transition: all 0.3s ease;
    backdrop-filter: blur(6px); /* Glass-like blur effect */
    border: 1px solid rgba(255, 255, 255, 0.3); /* Subtle border */
}

.btn_nav:hover {
    background-color: rgba(72, 163, 255, 0.2); /* Light blue semi-transparent background on hover */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); /* Soft shadow for depth */
    transform: translateY(-2px); /* Slight raise effect */
}


/*css for navbar ends*/
  




/*Footer content start*/
/* Footer Styling */
.site-footer {
    background-color:#333333;
    color: #f2f2f2;
    padding: 10px 0; /* Reduced vertical padding */
    font-family: Arial, sans-serif;
   position: relative;
}

.footer-container {
    max-width: 1200px;
    margin: 0 auto;
    display: flex; /* Enable flexbox for alignment */
    justify-content: space-between; /* Space between left and right sections */
    align-items: flex-start; /* Align items at the top */
    flex-wrap: wrap; /* Allow wrapping for smaller screens */
   
}

.footer-left {
    display: flex;
    flex-direction: column; /* Stack sections vertically */
    gap: 10px; /* Add spacing between sections */
}

.footer-nav {
    margin: 10px 0;
}

.footer-nav a {
    color: #f2f2f2;
    margin: 0 8px;
    text-decoration: none;
    font-weight: bold;
    transition: color 0.3s ease;
}

.footer-nav a:hover {
    color: #ff5722;
}

.footer-contacts {
    text-align: right; /* Align content to the right */
    font-size: 13px;
    line-height: 1.5;
}

.footer-contacts a {
    color: #ff5722;
    text-decoration: none;
}

.footer-contacts a:hover {
    text-decoration: underline;
}

.footer-socials {
    margin-top: 8px;
    display: flex;
    gap: 8px;
}

.social-icon {
    color: #f2f2f2;
    font-size: 16px;
    text-decoration: none;
    transition: transform 0.3s ease, color 0.3s ease;
}

.social-icon:hover {
    color: #ff5722;
    transform: scale(1.2);
}

/*Footer content end*/















    </style>


</head>
<body>




    <div class="navbar">
        <div>
          <button class="btn_nav" id="btnhome">
            <img src="./resources/home.png" alt="Home" style="width: 20px; height: 20px; vertical-align: middle;"></button>
        </div>
        
    
      </div>
    
    </br>
    






    
    <div class="container">
        <div class="header">
            <h1>Account Details</h1>
        </div>
        <div class="content">
            <h2>Personal Information</h2>
            <div class="details">
                <p id = "username_detail"><label>Username:</label> John Doe</p>
                <p id = "email_detail"><label>Email:</label> john.doe@example.com</p>
                
            </div>

            <h2>Activity</h2>
            <div class="details">
                <p id = "lost"><label>Items Reported as Lost:</label> 0</p>
                <p id ="found"><label>Items Reported as Found:</label> 0</p>
            </div>

            <h2>Account Settings</h2>
            <div class="actions">
                <button>Edit Profile</button>
                <button>Change Password</button>
            </div>

            <h2>My Items</h2>






            <div class="item-list">
                
              <div id="items_list">

             
    
    
    
                </div>
    
    <hr>
    





            </div>

            <div class="signout" id = "signout">
                <button>Sign Out</button>
            </div>
        </div>
    </div>
</body>




<hr>

<footer class="site-footer" id="navbar_footer">
    <div class="footer-container">
      <div class="footer-left">
        <p class="footer-copyright">&copy; 2024 FindIt . All rights reserved.</p>
        <nav class="footer-nav">
          <a href="">About</a>
          <a href="">Privacy Policy</a>
        </nav>
        <div class="footer-socials">
          <span>Follow us:</span>
          <a href="https://facebook.com" class="social-icon" title="Facebook"><i class="fab fa-facebook-f"></i></a>
          <a href="https://twitter.com" class="social-icon" title="Twitter"><i class="fab fa-twitter"></i></a>
          <a href="https://instagram.com" class="social-icon" title="Instagram"><i class="fab fa-instagram"></i></a>
        </div>
      </div>
      <div class="footer-contacts">
        <p>Contact Us:</p>
        <p>Email: <a href="mailto:krishnakr989@yahoo.com">krishnakr989@yahoo.com</a></p>
        <p>Phone: <a href="tel:+91 1234567890">+91 1234567890</a></p>
        <p>Address: Earth</p>
      </div>
    </div>
  </footer>
  






</html>





<script>


///important variables//////
let found = 0;
let lost = 0;


/////////////////////////////
//basic works///////




let username = localStorage.getItem('current_session');


//code for home button
let home_btn = document.getElementById('btnhome');
home_btn.onclick= ()=>{
    window.location.href = 'navbar.html';
}





















////security measure/////


window.onload = function() {
    
if (localStorage.getItem('current_session') === null || localStorage.getItem('current_session') === '') {
    window.location.href = "index.html";
  } 
else 
{
    /*fetch_account_details(username)*/
}





   
};


//////////////////////

//////////////////set account data ////////////////////////


 let account_info =   JSON.parse( localStorage.getItem('user_details'));



let user_name_info = account_info.username;

let email_info = account_info.email;

console.log("email_info :" + email_info)
 




let username_detail = document.getElementById("username_detail");


let email_detail  = document.getElementById("email_detail");



let lost_detail = document.getElementById("lost");


let found_detail  = document.getElementById("found");












username_detail.innerText = "Username : "+ user_name_info;
email_detail.innerText    = "Email    : " + email_info;









///////////////////////////////////////






///////logic for my items///////////////////////////////////////////////////////////////////////////////////////






let count = 0;
 


 let account_items_list; //stores temp json data




fetch('/account_item_list', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
    },
    body: JSON.stringify({ key: 'value' }) // Optional data to send
})
    .then(response => response.json()) // Parse JSON from the server response
    .then(data => {
        account_items_list = data; // Store the received JSON in the variable
        console.log('Received data:', account_items_list);
        console.log(typeof(account_items_list))
    })



    .then(data=> 
            
             
             
                
        add_buttons(account_items_list)
             
        

      )





    .catch(error => console.error('Error:', error));

  

function create_message(i,account_items_list) {




    if(user_name_info == account_items_list[i].user_who_registered ){   





const message_container = document.createElement("div");
message_container.id = 'message_container'


const message = document.createElement("button");

const time = document.createElement("button");


const open_btn = document.createElement("button");



message.innerText = account_items_list[i].name + "      (" + account_items_list[i].lost_or_found +")" ;  // Set button text


time.innerText = account_items_list[i].timestamp;





//add session in local storage

localStorage.setItem('current_session', account_items_list[i].current_session)



// Apply inline styles to the button using the 'style' property
message.style.backgroundColor = 'grey';  
message.style.color = 'white';  
message.style.padding = '30px 30px'; 
message.style.fontSize = '16px';  
message.style.border = '10px';  
message.style.borderRadius = '5px'; 
message.style.width = '50%'
message.style.textAlign = 'left'


message_container.style.display = 'flex'
message_container.style.flexDirection = 'row'
message_container.style.padding ='16px'

message_container.style.width = '100%'
message_container.style.justifyContent = 'center'





time.style.backgroundColor = 'light grey'
time.style.width = '15%'






open_btn.style.color = 'cream'
open_btn.style.width = '5%'
open_btn.id = account_items_list[i]._id,
open_btn.innerHTML = '<img src="./resources/open.png" alt="->" style="width: 20px; height: 20px;">';
open_btn.addEventListener("click",function(){On_click_open_btn(count,open_btn.id)})











message.id = `message${i}`;  // Set a unique ID using template literals

const div = document.querySelector("#items_list");

div.appendChild(message_container)

// Append the button to the div
message_container.appendChild(message);
message_container.appendChild(time)
message_container.appendChild(open_btn);
////


//updatelost,found details///
if(account_items_list[i].lost_or_found == 'found')
{found++;}
else if(account_items_list[i].lost_or_found  == 'lost' )
{lost++;}

lost_detail.innerText = "Items Reported as Lost: "+ lost;
found_detail.innerText    = "Items Reported as Found: " + found;




    }


}






function add_buttons(account_items_list){






 
count = account_items_list.length;
       

 console.log(count);


 console.log(typeof(account_items_list))










for (let i = 0; i < count; i++) {


create_message(i,account_items_list);

}


                




}

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
////logic to display message pages///////////////////////////////////////////////////////////

//fetch on click data


 function href_details() {
    // Redirect to the display_info.html page
    window.location.href = "display_info.html";
}

function fetch_details(count, id_to_fetch) {
    // Code to receive the details to display
    fetch('/details', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ id: id_to_fetch }) // Wrap id_to_fetch in an object
    })
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json(); // Parse JSON from the server response
        })
        .then(data => {
            console.log('Received data:', data);
            
            // Store the details in localStorage for use on the next page
            localStorage.setItem('details', JSON.stringify(data));
            
            // Redirect to the next page
           href_details();
        })
        .catch(error => {
            console.error('Error fetching details:', error);
        });
}



////initiate onclick feature for listing messages/////////

function On_click_open_btn(count,btn_id)
{


   fetch_details(count,btn_id);


}



















//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////



//logic for signout button///



let signout = document.getElementById('signout');
signout.onclick = function() {
    localStorage.setItem('current_session', '');
    localStorage.setItem('user_details', '');
    window.location.href = "index.html";
};






//////////////////////////////















</script>





